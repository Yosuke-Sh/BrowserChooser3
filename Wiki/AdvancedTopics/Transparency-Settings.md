# 透明化設定

BrowserChooser3は、モダンでパーソナライズされたインターフェースを作成できる高度な透明化と視覚的カスタマイズオプションを提供します。

## 🎨 概要

BrowserChooser3の透明化システムは以下を提供します：
- **ウィンドウ透明化**: ウィンドウ全体の透明度調整
- **透明化キー**: 特定領域の色ベース透明化
- **角の丸み**: モダンな角丸効果
- **タイトルバー制御**: タイトルバーの非表示オプション
- **背景カスタマイズ**: カスタム背景色

## ⚙️ 設定

### 透明化設定へのアクセス
1. BrowserChooser3を起動
2. `O`キーを押してオプションダイアログを開く
3. **Display**タブに移動
4. **Transparency Settings**セクションまでスクロール

### 設定オプション

#### 透明化を有効化
- **チェックボックス**: 透明化効果の有効/無効
- **デフォルト**: 有効
- **効果**: 有効にすると、メインウィンドウに透明化設定が適用される

#### 透明化色
- **コントロール**: カラーピッカー（PictureBox）
- **デフォルト**: マゼンタ（`#FF00FF`）
- **使用方法**: この色がウィンドウ内で透明になる
- **ヒント**: コンテンツに含まれない色を選択

#### 不透明度
- **コントロール**: NumericUpDown（0.01 - 1.00）
- **デフォルト**: 0.9（90%の不透明度）
- **範囲**: 0.01（ほぼ透明）から1.00（完全に不透明）
- **精度**: 小数点以下2桁

#### タイトルバーを非表示
- **チェックボックス**: ウィンドウタイトルバーの表示/非表示
- **デフォルト**: 有効（非表示）
- **効果**: よりクリーンな外観のためにタイトルバーを削除
- **注意**: 非表示でも、エッジをドラッグしてウィンドウサイズを変更可能

#### 角の丸み半径
- **コントロール**: NumericUpDown（0 - 50）
- **デフォルト**: 0（無効）
- **範囲**: 0（角丸なし）から50（非常に丸い）
- **効果**: ウィンドウに角丸を作成

## 🎯 使用例

### モダングラス効果
```
透明化を有効化: ✓
透明化色: マゼンタ
不透明度: 0.8
タイトルバーを非表示: ✓
角の丸み半径: 15
```

### 控えめな透明化
```
透明化を有効化: ✓
透明化色: マゼンタ
不透明度: 0.95
タイトルバーを非表示: ✗
角の丸み半径: 5
```

### 透明化なし（クラシックな外観）
```
透明化を有効化: ✗
タイトルバーを非表示: ✗
角の丸み半径: 0
```

## 🔧 技術詳細

### 透明化の仕組み

#### ウィンドウ透明化
- Windows API `SetLayeredWindowAttributes`を使用
- ウィンドウ全体に適用
- コントロールを含むすべてのコンテンツに影響

#### 色キー透明化
- `TransparencyKey`プロパティを使用
- 特定の色を完全に透明にする
- 「切り抜き」効果の作成に有用

#### 角の丸み
- `GraphicsPath`と`Region`クラスを使用
- 滑らかな角丸矩形を作成
- ウィンドウサイズ変更時に自動調整

### パフォーマンス考慮事項

#### ハードウェアアクセラレーション
- 透明化効果は利用可能な場合ハードウェアアクセラレーションを使用
- グラフィックカードによってパフォーマンスが異なる場合がある
- 古いシステムではパフォーマンスが低下する可能性

#### メモリ使用量
- 透明化効果には追加メモリが必要
- 角丸は角丸なしよりも多くのリソースを使用
- 低メモリシステムでは無効化を検討

## 🎨 視覚効果

### 透明化の組み合わせ

#### 高透明化（0.1 - 0.3）
- **使用例**: 控えめなオーバーレイ効果
- **最適**: バックグラウンドアプリケーション
- **考慮事項**: 読みにくい場合がある

#### 中程度の透明化（0.4 - 0.7）
- **使用例**: 視認性と透明化のバランス
- **最適**: 一般的な使用
- **考慮事項**: 透明化を保ちながら良好な可読性

#### 低透明化（0.8 - 0.95）
- **使用例**: 控えめな透明化効果
- **最適**: プロフェッショナルな外観
- **考慮事項**: 最小限の透明化影響

### 角丸効果

#### 小半径（1 - 10）
- **外観**: 控えめな角丸
- **使用例**: モダンだが控えめな外観
- **パフォーマンス**: 最小限の影響

#### 中半径（11 - 25）
- **外観**: 目立つ角丸
- **使用例**: モダンで親しみやすい外観
- **パフォーマンス**: 中程度の影響

#### 大半径（26 - 50）
- **外観**: 非常に丸い、ピル状
- **使用例**: 遊び心のあるモダンデザイン
- **パフォーマンス**: より高い影響

## 🚨 トラブルシューティング

### よくある問題

#### 透明化が動作しない
**症状**: 設定に関係なくウィンドウが不透明に見える
**解決策**:
1. Windows透明化効果が有効かチェック
2. グラフィックドライバーを更新
3. .NET 8.0がインストールされているか確認
4. 異なる透明化色を試す

#### パフォーマンス問題
**症状**: レンダリングが遅い、またはCPU使用率が高い
**解決策**:
1. 不透明度値を下げる
2. 角丸半径を減らす
3. 一時的に透明化を無効化
4. グラフィックドライバーの更新をチェック

#### 角丸が滑らかでない
**症状**: ギザギザまたはピクセル化された角
**解決策**:
1. ハードウェアアクセラレーションを有効化
2. グラフィックドライバーを更新
3. 角丸半径を減らす
4. Windows DPI設定をチェック

#### タイトルバーの問題
**症状**: ウィンドウのサイズ変更や移動ができない
**解決策**:
1. 一時的にタイトルバーを有効化
2. ウィンドウエッジを使用してサイズ変更
3. ウィンドウ状態設定をチェック

### 高度なトラブルシューティング

#### デバッグログを有効化
```bash
BrowserChooser3.exe --log
```

透明化関連のエラーについてログファイルをチェック：
- `MainForm.ApplyTransparencySettings`
- `MainForm.ApplyRoundedCorners`
- `CreateRoundedRectangleRegion`

#### レジストリ設定
透明化がまだ動作しない場合、Windowsレジストリをチェック：
```
HKEY_CURRENT_USER\Software\Microsoft\Windows\DWM
EnableAeroPeek = 1
```

## 💡 ヒントとベストプラクティス

### 色選択
- **一般的な色を避ける**: コンテンツに含まれる色を使用しない
- **十分にテスト**: 異なる透明化色を試す
- **コントラストを考慮**: テキストが読みやすさを保つことを確認

### パフォーマンス最適化
- **控えめに開始**: より高い不透明度値から開始
- **ターゲットシステムでテスト**: 遅いマシンでのパフォーマンスを確認
- **リソースを監視**: CPUとメモリ使用量を監視

### アクセシビリティ
- **可読性を維持**: 十分なコントラストを確保
- **ユーザーでテスト**: 実際のユーザーからフィードバックを得る
- **代替手段を提供**: 透明化の無効化を許可

### デザインガイドライン
- **一貫性**: アプリケーション間で同様の設定を使用
- **目的**: 透明化は使いやすさを向上させるべきで、妨げるべきではない
- **コンテキスト**: デスクトップ環境を考慮

## 🔄 Browser Chooser 2からの移行

BrowserChooser3の透明化システムは完全に新しく、Browser Chooser 2からの設定移行はありません。以下が必要です：

1. **手動で設定**: BrowserChooser3で透明化設定を設定
2. **十分にテスト**: 新しいシステムが期待通りに動作することを確認
3. **必要に応じて調整**: 好みに合わせて設定を微調整

## 📚 関連トピック

- [設定ガイド](Configuration-Guide)
- [アクセシビリティ機能](Accessibility-Features)
- [トラブルシューティング](Troubleshooting)
- [カスタマイズ](Customization)

---

*他の表示設定の詳細については、[設定ガイド](Configuration-Guide)をご覧ください。*

